# UIプレハブ実装手順とまとめ

## 1. 実装前の準備

### 1.1 スクリプトの配置
1. 作成した3つのUIスクリプト（CookingActionUI.cs、TastingUI.cs、ResultUI.cs）を `/Assets/Scripts/UI/Gameplay/` フォルダに配置
2. スクリプトに不足している参照（例：GameManagerクラス）がある場合は、適宜追加・修正

### 1.2 必要なアセットの準備
1. ボタン用の基本スプライト（丸角長方形）を作成または取得
2. アイコン（かき混ぜ、食材追加、完成、星、試食など）を準備
3. 鍋、お椀などの基本グラフィックアセットを準備
4. フォント（丸ゴシック体等）をインポート

### 1.3 フォルダ構造の確認
以下のフォルダ構造が望ましい：
```
Assets/
├── Prefabs/
│   └── UI/
│       ├── Common/
│       └── Gameplay/  # ここに作成するプレハブを配置
├── Scripts/
│   └── UI/
│       └── Gameplay/  # UIスクリプトを配置
├── Sprites/
│   └── UI/  # UIスプライトを配置
└── Animations/
    └── UI/  # UIアニメーションを配置
```

## 2. 実装手順

### 2.1 CookingActionUIプレハブの実装

1. 「2〜5歳の子ども向け」という点を意識し、全体的に大きく、明るく、シンプルなデザインを心掛ける
2. 「ビジュアル・オーディオデザインガイドライン」に基づき、指定されたカラーパレットを使用
   - プライマリーカラー: #FF9A3C（暖かみのあるオレンジ）
   - セカンダリーカラー: #4DB6E5（明るい青）
   - アクセントカラー: #7ED957（鮮やかな緑）
3. 各ボタンの視認性を高めるため、アイコンとテキストの両方を表示
4. 調理プロセスの視覚的フィードバックを強化するため、進行状況バーと状態アイコンを明確に表示
5. CookingActionUIプレハブ構築ガイドに従って階層構造を作成
6. スクリプトの参照設定を確認

### 2.2 TastingUIプレハブの実装

1. 試食エリアは、3Dシーンの試食キャラクターが見える設計にする
2. リアクションパネルは、キャラクターの反応を楽しめるよう、大きく、鮮やかに表示
3. スープは実際の調理結果を反映した色で表示
4. TastingUIプレハブ構築ガイドに従って階層構造を作成
5. スクリプトの参照設定を確認

### 2.3 ResultUIプレハブの実装

1. 結果発表は「お祝い」の雰囲気を出すデザインにする
2. 星評価は順番に表示され、獲得時にはエフェクトを追加
3. 使用した食材一覧を見やすく表示
4. スープの最終結果を大きく表示
5. ResultUIプレハブ構築ガイドに従って階層構造を作成
6. スクリプトの参照設定を確認

## 3. アニメーションの実装

### 3.1 基本アニメーションの作成

1. ボタン押下時のスケールアニメーション
   - 各スクリプトに実装済みの`ButtonPressAnimation`コルーチンを使用
   - 軽く縮小→元のサイズに戻る動き

2. パネル表示/非表示アニメーション
   - 各UIパネルのAnimatorコントローラーを作成
   - フェードイン/アウトとスケールアニメーションを組み合わせる

### 3.2 特殊アニメーションの追加

1. **CookingActionUI**
   - 温度スライダー調整時の炎の色変化アニメーション
   - 調理状態変更時のアイコン切り替えアニメーション

2. **TastingUI**
   - キャラクターリアクション表示時のパネル拡大アニメーション
   - リアクションに応じたパーティクルエフェクト

3. **ResultUI**
   - 星評価の順次表示アニメーション
   - 結果テキストのスケールアニメーション
   - ボタンの順次表示アニメーション

## 4. GameplayUIControllerとの連携

1. GameplayUIController.csに各UIプレハブへの参照が設定されていることを確認
   ```csharp
   [SerializeField] private ProgressUI progressUI;
   [SerializeField] private CookingActionUI cookingActionUI;
   [SerializeField] private IngredientSelectionUI ingredientSelectionUI;
   [SerializeField] private TastingUI tastingUI;
   [SerializeField] private ResultUI resultUI;
   ```

2. GameplayUIControllerが正しく各UIパネルを制御していることを確認
   - 状態変更イベント（OnGameStateChanged）に応じた適切なパネル表示
   - UIの初期化メソッドの呼び出し

3. ゲームプレイマネージャー（GameplayManager）との連携確認
   - 状態遷移のトリガーとなるボタンイベントが正しく接続されているか

## 5. テストと調整

### 5.1 UIプレハブの動作確認

1. 各プレハブをシーンに配置し、エディタ上で見た目を確認
2. プレイモードでボタンの反応やアニメーションを確認
3. 各UI要素のサイズと位置が様々な解像度で適切に表示されるか確認

### 5.2 ゲームフロー全体の確認

1. 食材選択→調理→試食→結果表示の一連の流れをテスト
2. 各状態間の遷移がスムーズに行われるか確認
3. UIフィードバックが適切に提供されているか確認

### 5.3 アクセシビリティの確認

1. テキストサイズと可読性の確認
2. 色のコントラストが十分か確認
3. タッチターゲット（ボタンなど）のサイズが適切か確認

## 6. 最終調整とポリッシュ

1. ビジュアルの一貫性確認
   - カラーパレットの統一
   - フォントスタイルの統一
   - アイコンスタイルの統一

2. アニメーションのタイミング調整
   - 遅すぎず、速すぎないテンポ
   - 子ども向けの適切な速度感

3. テキストの最終確認
   - 漢字使用を最小限に
   - 親しみやすい表現
   - 子どもが理解しやすい言葉遣い

## 7. 実装時の注意点

1. **子ども向けUI設計のポイント**
   - 十分に大きなタッチターゲット
   - シンプルで直感的な操作
   - 明るく親しみやすい色使い
   - 操作結果の明確なフィードバック
   - テキストは最小限、ひらがな中心

2. **パフォーマンス考慮**
   - 多数のアニメーションを同時に再生しない
   - パーティクルエフェクトは必要最小限に
   - 低スペックデバイスでも快適に動作する最適化

3. **アクセシビリティ**
   - 色だけでなく形状でも情報を伝える
   - テキストと背景の高コントラスト
   - 十分な大きさのUI要素

これらのガイドラインに沿って実装することで、2〜5歳の子どもたちが直感的に操作でき、楽しく学べる「おいしいスープをつくろう」の世界を実現できます。